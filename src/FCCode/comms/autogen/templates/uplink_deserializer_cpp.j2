/** THIS IS AN AUTOGENERATED FILE **/
#include "uplink_deserializer.hpp"
#include <comms_utils.hpp>

void Comms::deserialize_uplink(const std::bitset<Comms::UPLINK_SIZE_BITS>& mes, Comms::Uplink* uplink) {
  unsigned int bitset_ptr = 0;
  {% for field in fields -%}
  std::bitset<{{field.size}}> bitset_{{loop.index}};
  for(int i = 0; i < {{field.size}}; i++) bitset_{{loop.index}}.set(i, mes[bitset_ptr++]);
  {% if field.type == "bool" -%}
  uplink->{{field.name}} = bitset_{{loop.index}}[0];
  {% else -%}
  {% if field.type not in ["vector", "gps_time", "quaternion"] -%}
  uplink->{{field.name}} = {%- endif -%}Comms::expand_{{field.type}}(bitset_{{loop.index}}, {{field.expand_fn_args}});
  {% endif -%}
  {% endfor %}
}